# Protocol: UI Fixes & Dynamic Stats

**Date:** 2026-01-01
**Status:** Active
**Mode:** Architect -> Code

## Описание
Исправление отображения статуса подключения к серверу и реализация динамической статистики в UI клиента.

## Проблема
1. Пользователь видит "Сервер отключен", хотя сервер работает.
2. В коде `+page.svelte` используется дублирующая логика WebSocket, игнорируя `lib/socket.ts`.
3. Статистика (Серия, Слова, Слов/мин) в `Header.svelte` захардкожена.

## Цели
1. **Refactor WebSocket**: Перенести логику работы с сокетом в Svelte Store, используя `SocketManager` из `lib/socket.ts`.
2. **Fix Status**: Обеспечить корректное реактивное обновление статуса `isConnected` в UI.
3. **Dynamic Stats**: Реализовать подсчет статистики (слов, WPM) на клиенте и отображение реальных данных.

## Требования
- Использовать `SocketManager` как singleton или через Context/Store.
- Статистика должна обновляться в реальном времени при получении транскрипции.
- Сохранить обратную совместимость с текущим UI.

## Definition of Done
- [ ] Статус сервера корректно меняется (Подключен/Отключен).
- [ ] Код `+page.svelte` очищен от прямой работы с `WebSocket`.
- [ ] Статистика в шапке обновляется при диктовке.