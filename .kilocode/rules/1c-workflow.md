# 1C Development Workflow

> Специализированный рабочий процесс для разработки на платформе 1С:Предприятие.

## 1. Роли и Режимы (Roles & Modes)

| Режим | Роль | Обязанности |
|-------|------|-------------|
| `1c-orchestrator` | Координатор | Управление процессом, декомпозиция задач, контроль сроков |
| `1c-business-analyst` | Бизнес-аналитик | Сбор требований, описание бизнес-процессов, User Stories |
| `1c-system-analyst` | Системный аналитик | Техническое проектирование, ER-диаграммы, спецификации API |
| `1c-architect` | Архитектор | Выбор архитектурных решений, интеграционные потоки, стандарты |
| `1c-docs-specialist` | Технический писатель | Документация пользователя, администратора, справка |
| `1c-developer` | Разработчик | Написание кода, запросы, СКД, обработчики событий |
| `1c-kd-developer` | Разработчик КД | Правила обмена (КД 2.0/3.0), XDTO пакеты |
| `1c-form-designer` | Дизайнер форм | Проектирование управляемых форм, UX/UI в рамках 1С |
| `1c-tester` | Тестировщик | Vanessa Automation, xUnitFor1C, ручное тестирование |
| `1c-integration-specialist` | Интегратор | HTTP/Web-сервисы, RabbitMQ, Kafka, OData |
| `1c-quality-specialist` | Аудитор качества | Code Review, АПК, проверка стандартов разработки |

## 2. Рабочие процессы (Workflows)

### Полный цикл (New Feature)
Используется для разработки нового функционала.

1. **Бизнес-анализ** (`1c-business-analyst`)
   - Сбор требований
   - Формирование `brief.md`
2. **Системный анализ** (`1c-system-analyst`)
   - Проектирование метаданных
   - Описание алгоритмов
3. **Архитектура** (`1c-architect`)
   - Проверка на соответствие стандартам
   - Интеграционная схема
4. **Документация** (`1c-docs-specialist`)
   - Создание структуры документации
5. **Разработка** (`1c-developer` / `1c-kd-developer`)
   - Реализация в конфигураторе/EDT
   - Написание кода модулей
6. **Тестирование** (`1c-tester`)
   - Написание сценариев Vanessa Automation
   - Unit-тесты
7. **Интеграция** (`1c-integration-specialist`)
   - Настройка обменов (если требуется)
8. **Качество** (`1c-quality-specialist`)
   - Code Review
   - Проверка SonarQube / АПК

### Сокращённый цикл (Bugfix / Minor Change)
Используется для исправлений и небольших доработок.

1. **Анализ** (`1c-system-analyst`)
   - Локализация проблемы
   - План исправления
2. **Разработка** (`1c-developer`)
   - Исправление кода
3. **Тестирование** (`1c-tester`)
   - Проверка исправления
   - Регрессионное тестирование

## 3. Специфика 1С

- **Язык:** Русский (в коде и документации), английский для международных проектов.
- **Платформа:** 8.3+
- **Инструменты:** Конфигуратор, EDT, Vanessa Automation, OneScript.
- **Стандарты:** ИТС, Система стандартов и методик разработки конфигураций.

## 4. Правила делегирования

- **Orchestrator** должен использовать `new_task` с соответствующим режимом `1c-*`.
- **ПРЕДПОЧИТАТЬ** специализированные режимы `1c-*` вместо общего `code`. Режим `code` допускается использовать, если нет подходящего специализированного агента или задача тривиальна.
- При создании задачи явно указывать контекст (конфигурация, версия платформы).

## 5. Best Practices & Techniques

### Prompt Repetition для анализа 1С

При работе с большими модулями 1С (которые часто превышают стандартные размеры файлов) или анализе логов ЖР/ТЖ, используйте технику **Prompt Repetition**:

1.  **Повторяйте задачу:** Указывайте вопрос в начале и в конце сообщения при делегировании агенту.
2.  **Зачем:** Это критично для точности поиска в специфическом синтаксисе 1С и предотвращает "галлюцинации" при работе с русскоязычным кодом в больших контекстах.
3.  **Пример:**
    ```
    <QUERY>
    ЗАДАЧА: Найти все вызовы `Справочники.Номенклатура.СоздатьЭлемент()`
    </QUERY>
    [... код модуля на 10к строк ...]
    <QUERY>
    ЗАДАЧА: Найти все вызовы `Справочники.Номенклатура.СоздатьЭлемент()`
    </QUERY>