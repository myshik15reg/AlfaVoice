# AI Execution Rules - Правила выполнения команд

## Обязательные требования для всех AI-агентов

### 1. Таймауты для всех команд

**КРИТИЧНО:** Все команды Bash/Shell ДОЛЖНЫ выполняться с явно указанным timeout.

#### Таблица таймаутов

| Категория | Timeout | Примеры команд |
|-----------|---------|----------------|
| **Быстрые** | 10 сек | `ls`, `pwd`, `cat`, `echo`, `git status` |
| **Средние** | 60 сек | `grep`, `find`, `git commit`, `git push`, `rm`, `cp` |
| **Установка зависимостей** | 180 сек | `npm install`, `pip install`, `cargo build` |
| **Компиляция** | 300 сек | `mvn compile`, `dotnet build`, `cargo build --release` |
| **Unit-тесты** | 300 сек | `npm test`, `pytest`, `cargo test`, `mvn test` |
| **Интеграционные тесты** | 480 сек | `npm run test:integration`, E2E тесты |
| **Полный CI/CD** | 600 сек | Pipeline запуски, полная сборка проекта |
| **1C Операции** | 120-1200 сек | Синтаксис (120s), Обновление (600s), Vanessa (1200s) |

#### Примеры использования

```bash
# ❌ НЕПРАВИЛЬНО - без timeout
ls -la

# ✅ ПРАВИЛЬНО - с timeout
ls -la  # timeout: 10 секунд
```

### 2. Обработка зависания

Если команда превысила timeout:
1. Зафиксировать проблему.
2. Попытаться альтернативный подход (например, `npm ci` вместо `npm install`).
3. Продолжить выполнение, отметив проблему.

### 3. Специальные случаи
- **Интерактивные команды:** Избегать (использовать `-y`, `--no-interactive`).
- **Watch-процессы:** Использовать background режим.

### 4. Мониторинг
- Логировать время выполнения критичных операций.

### 5. Восстановление
- Команды должны быть идемпотентными.
- Использовать retry-логику для сетевых операций.

### 6. Checklist
- [ ] Timeout указан явно
- [ ] Команда не интерактивная
- [ ] Есть план действий при зависании

## 7. Запуск скриптов (Python, Bash, Node.js и др.)
Для всех скриптов (Python, Bash, Node.js) также применять таймауты:
- Быстрые утилиты: 30-60 сек
- Тесты: 300 сек
- Сборка/Деплой: 300-600 сек

Всегда проверять наличие интерпретатора и зависимостей перед запуском (`python --version`, `npm --version`).